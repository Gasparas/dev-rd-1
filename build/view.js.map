{"version":3,"file":"view.js","mappings":"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","sources":["webpack://rd-shop-product/./src/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n/* eslint-disable no-console */\nconsole.log('Hello World! (from create-block-rd-shop-product block)');\n/* eslint-enable no-console */\nclass EventDispatcher {\n    constructor() {\n        this.listeners = {};\n    }\n\n    subscribe(eventName, callback) {\n        if (!this.listeners[eventName]) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(callback);\n    }\n\n    emit(eventName, data) {\n        const eventListeners = this.listeners[eventName];\n        if (eventListeners) {\n            eventListeners.forEach(callback => callback(data));\n        }\n    }\n}\nconst eventDispatcher = new EventDispatcher();\n\nclass CounterBox {\n    constructor(displayElement, initialValue = 0, min = 0, max = 20) {\n        this.counterValue = initialValue;\n        this.min = min;\n        this.max = max;\n        this.displayElement = displayElement;\n        this.isActive = false;\n        this.updateDisplay();\n    }\n\n    setActive(state) {\n        this.isActive = state;\n        console.log(this.displayElement, state);\n    }\n\n    increment() {\n        if (this.isActive && this.counterValue < this.max) {\n            this.counterValue++;\n            this.updateDisplay();\n            eventDispatcher.emit('counterUpdated', 1);\n        }\n    }\n\n    decrement() {\n        if (this.isActive && this.counterValue > this.min) {\n            this.counterValue--;\n            this.updateDisplay();\n            eventDispatcher.emit('counterUpdated', -1);\n        }\n    }\n\n    updateDisplay() {\n        // this.displayElement.textContent = `${this.counterValue}`;\n        this.displayElement.textContent = this.counterValue > 0 ? this.counterValue : '';\n    }\n}\n\nclass Button {\n    constructor(buttonType, counterBox) {\n        this.buttonType = buttonType;\n        this.counterBox = counterBox;\n        this.element = this.createButton();\n        this.addClickListener();\n    }\n\n    createButton() {\n        const button = document.createElement('button');\n        button.textContent = this.buttonType === 'plus' ? '+' : '-';\n        return button;\n    }\n\n    addClickListener() {\n        this.element.addEventListener('click', () => this.onClick());\n    }\n\n    onClick() {\n        if (this.buttonType === 'plus') {\n            this.counterBox.increment();\n        } else if (this.buttonType === 'minus') {\n            this.counterBox.decrement();\n        }\n    }\n}\n\nclass GlobalCounterBox {\n    static initialize(wrapperId) {\n        GlobalCounterBox.globalCount = 0;\n\n        // Find the wrapper element by its ID\n        const wrapper = document.getElementById(wrapperId);\n        if (!wrapper) {\n            console.error(`Wrapper with ID ${wrapperId} not found`);\n            return;\n        }\n\n        // Create and append the display element for the global counter within the wrapper\n        const globalCounterDisplay = document.createElement('div');\n        globalCounterDisplay.id = 'globalCounter'; // Adding an ID for styling or querying\n        wrapper.appendChild(globalCounterDisplay);\n        GlobalCounterBox.displayElement = globalCounterDisplay;\n        GlobalCounterBox.updateDisplay();\n\n        // Subscribe to counter updates\n        eventDispatcher.subscribe('counterUpdated', (change) => {\n            GlobalCounterBox.globalCount += change;\n            GlobalCounterBox.ensureGlobalCountWithinRange();\n            GlobalCounterBox.updateDisplay();\n        });\n    }\n\n    static ensureGlobalCountWithinRange() {\n        if (GlobalCounterBox.globalCount < 0) {\n            GlobalCounterBox.globalCount = 0;\n        }\n        // Uncomment if there's an upper limit for the global count\n        // if (GlobalCounterBox.globalCount > maxGlobalCount) {\n        //     GlobalCounterBox.globalCount = maxGlobalCount;\n        // }\n    }\n\n    static updateDisplay() {\n        if (GlobalCounterBox.displayElement) {\n            GlobalCounterBox.displayElement.textContent = `Global: ${GlobalCounterBox.globalCount}`;\n        }\n    }\n}\n\nclass Controller {\n    constructor() {\n        this.activeCounter = null;\n        this.counters = [];\n    }\n\n    registerCounter(counter) {\n        this.counters.push(counter);\n    }\n\n    setActiveCounter(activeCounter) {\n        if (this.activeCounter) {\n            this.activeCounter.setActive(false);\n        }\n        this.activeCounter = activeCounter;\n        this.activeCounter.setActive(true);\n    }\n}\n\n\nclass CounterInstance {\n    constructor(controller, wrapperId, instanceId, counterValue = 0, counterRange = { min: 0, max: 20 }) {\n        this.controller = controller;\n        this.wrapperId = wrapperId;\n        this.instanceId = instanceId;\n        const parent = document.getElementById(wrapperId);\n        if (!parent) {\n            console.error('Parent not found');\n            return;\n        }\n\n        const radioContainer = document.createElement('div');\n        radioContainer.className = 'radio-container';\n        parent.appendChild(radioContainer);\n\n        const radioButton = document.createElement('input');\n        radioButton.type = 'radio';\n        radioButton.id = `${wrapperId}-radio-${instanceId}`;\n        radioButton.name = `number-${wrapperId}`;\n        radioButton.className = 'radio-button';\n        radioButton.checked = instanceId === 0;\n        radioContainer.appendChild(radioButton);\n\n        const label = document.createElement('label');\n        label.setAttribute('for', `${wrapperId}-radio-${instanceId}`);\n        label.className = 'radio-label';\n        radioContainer.appendChild(label);\n\n        const buttonContainer = document.createElement('div');\n        buttonContainer.className = 'button-container';\n        radioContainer.appendChild(buttonContainer);\n\n        const displayElement = label;\n\n        this.counterBox = new CounterBox(displayElement, counterValue, counterRange.min, counterRange.max);\n        this.radioButton = document.createElement('input');\n\n        // const minusButton = new Button('minus', counterBox);\n        // buttonContainer.appendChild(minusButton.element);\n\n        // const plusButton = new Button('plus', counterBox);\n        // buttonContainer.appendChild(plusButton.element);\n\n        // Event listener that might trigger setActive\n        radioButton.addEventListener('change', () => {\n            if (radioButton.checked) {\n                this.controller.setActiveCounter(this);\n            }\n        });\n    }\n\n    setActive(isActive) {\n        this.counterBox.setActive(isActive);\n        if (isActive) {\n            // Additional logic when this counter becomes active\n            // console.log(this.counterBox, 'is active');\n        }\n    }\n}\n\n\n// Example usage: Creating a new counter instance within the 'app' parent element\nconst controllerA = new Controller();\nconst controllerB = new Controller();\n\nnew CounterInstance(controllerA, 'app_0', 0, 0, { min: 0, max: 3 });\nnew CounterInstance(controllerA, 'app_0', 1, 0, { min: 0, max: 4 });\nnew CounterInstance(controllerA, 'app_0', 2, 0, { min: 0, max: 4 });\nnew CounterInstance(controllerA, 'app_0', 3, 0, { min: 0, max: 4 });\n\nnew CounterInstance(controllerB, 'app_1', 0, 0, { min: 0, max: 3 });\nnew CounterInstance(controllerB, 'app_1', 1, 0, { min: 0, max: 4 });\n\nGlobalCounterBox.initialize('globalCounterWrapper');"],"names":["console","log","EventDispatcher","constructor","listeners","subscribe","eventName","callback","push","emit","data","eventListeners","forEach","eventDispatcher","CounterBox","displayElement","initialValue","min","max","counterValue","isActive","updateDisplay","setActive","state","increment","decrement","textContent","Button","buttonType","counterBox","element","createButton","addClickListener","button","document","createElement","addEventListener","onClick","GlobalCounterBox","initialize","wrapperId","globalCount","wrapper","getElementById","error","globalCounterDisplay","id","appendChild","change","ensureGlobalCountWithinRange","Controller","activeCounter","counters","registerCounter","counter","setActiveCounter","CounterInstance","controller","instanceId","counterRange","parent","radioContainer","className","radioButton","type","name","checked","label","setAttribute","buttonContainer","controllerA","controllerB"],"sourceRoot":""}