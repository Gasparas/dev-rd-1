(()=>{"use strict";var t={63:(t,e,r)=>{var o=r(609),a="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},n=o.useState,c=o.useEffect,s=o.useLayoutEffect,i=o.useDebugValue;function l(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!a(t,r)}catch(t){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),o=n({inst:{value:r,getSnapshot:e}}),a=o[0].inst,u=o[1];return s((function(){a.value=r,a.getSnapshot=e,l(a)&&u({inst:a})}),[t,r,e]),c((function(){return l(a)&&u({inst:a}),t((function(){l(a)&&u({inst:a})}))}),[t]),i(r),r};e.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},940:(t,e,r)=>{var o=r(609),a=r(888),n="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},c=a.useSyncExternalStore,s=o.useRef,i=o.useEffect,l=o.useMemo,u=o.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,r,o,a){var d=s(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;d=l((function(){function t(t){if(!i){if(i=!0,c=t,t=o(t),void 0!==a&&m.hasValue){var e=m.value;if(a(e,t))return s=e}return s=t}if(e=s,n(c,t))return e;var r=o(t);return void 0!==a&&a(e,r)?e:(c=t,s=r)}var c,s,i=!1,l=void 0===r?null:r;return[function(){return t(e())},null===l?void 0:function(){return t(l())}]}),[e,r,o,a]);var p=c(t,d[0],d[1]);return i((function(){m.hasValue=!0,m.value=p}),[p]),u(p),p}},888:(t,e,r)=>{t.exports=r(63)},242:(t,e,r)=>{t.exports=r(940)},609:t=>{t.exports=window.React}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=r(609);const e=window.wp.element,o=window.wp.apiFetch;var a=r.n(o);const n=t=>{let e;const r=new Set,o=(t,o)=>{const a="function"==typeof t?t(e):t;if(!Object.is(a,e)){const t=e;e=(null!=o?o:"object"!=typeof a||null===a)?a:Object.assign({},e,a),r.forEach((r=>r(e,t)))}},a=()=>e,n={setState:o,getState:a,getInitialState:()=>c,subscribe:t=>(r.add(t),()=>r.delete(t)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=e=t(o,a,n);return n};var c=r(242);const{useDebugValue:s}=t,{useSyncExternalStoreWithSelector:i}=c;let l=!1;const u=t=>t,d=t=>{"function"!=typeof t&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e="function"==typeof t?(t=>t?n(t):n)(t):t,r=(t,r)=>function(t,e=u,r){r&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);const o=i(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return s(o),o}(e,t,r);return Object.assign(r,e),r};function m(t,e){let r;return function(...o){clearTimeout(r),r=setTimeout((()=>{clearTimeout(r),t(...o)}),e)}}const p={},f={};var g;window.myGlobalStore=window.myGlobalStore||((g=(t,e)=>({totalCartUpdate:0,cartProducts:[],totalQuantity:0,totalPrice:0,totalSalePrice:0,isLoading:!1,error:"",isAddingToCart:!1,cartAdditions:{},cartRemovals:{},fetchCart:async()=>{try{const e=await a()({path:"/wc/store/cart"});t({cartProducts:e.items,totalQuantity:e.items.reduce(((t,e)=>t+e.quantity),0),totalPrice:parseFloat(e.totals.total_items)/100,totalSalePrice:parseFloat(e.totals.total_price)/100,error:""})}catch(e){console.error("Error fetching cart:",e),t({error:"Failed to fetch cart."})}},addToCart:r=>{const o=e().cartAdditions[r]||0;t((t=>({cartAdditions:{...t.cartAdditions,[r]:o+1}}))),p[r]||(p[r]=m((async()=>{t({isLoading:!0});try{const o=e().cartAdditions[r];console.log(`Adding ${o} of product ${r} to cart.`),await a()({path:"/wc/store/cart/add-item",method:"POST",data:{id:r,quantity:o}}),t((t=>({cartAdditions:{...t.cartAdditions,[r]:0}}))),e().fetchCart()}catch(e){console.error("Error adding item to cart:",e),t({error:"Failed to add item to cart."})}finally{t({isLoading:!1})}}),300)),p[r]()},remFromCart:r=>{const o=e().cartRemovals[r]||0;t((t=>({cartRemovals:{...t.cartRemovals,[r]:o+1}}))),f[r]||(f[r]=m((async()=>{t({isLoading:!0});const o=e().cartProducts.find((t=>t.id===r));if(!o)return console.error("Item not found in cart:",r),void t({isLoading:!1});try{const n={key:o.key,quantity:o.quantity-e().cartRemovals[r]};t((t=>({cartRemovals:{...t.cartRemovals,[r]:0}}))),await a()({path:n.quantity>0?"/wc/store/cart/update-item":"/wc/store/cart/remove-item",method:"POST",data:n}),console.log(`Updated cart for product ${r}.`),e().fetchCart()}catch(e){console.error("Error updating cart:",e),t({error:"Failed to update cart."})}finally{t({isLoading:!1}),e().triggerTotalCartUpdate()}}),300)),f[r]()},triggerTotalCartUpdate:()=>{t((t=>({totalCartUpdate:t.totalCartUpdate+1})))}}))?d(g):d);const v=window.myGlobalStore;console.log("view.js");const y=({beforeNextStep:e,percanteges:r,currentStep:o})=>{const a=r[o];return(0,t.createElement)("div",{className:"lg:w-[400px] w-[330px]",style:{position:"fixed",bottom:"5px",left:"50%",translate:"-50%"}},(0,t.createElement)("div",{className:"flex  justify-around items-center px-3 py-2 mb-1 text-sm font-medium text-white bg-blue-500 rounded-lg [&>span]:text-xs"},(0,t.createElement)("div",null,"Add ",(0,t.createElement)("span",{className:"mr-1"},e),"more to get"," ",(0,t.createElement)("span",{className:"mx-1"},a," OFF")),(0,t.createElement)("a",{href:"/?page_id=9",className:"px-2 py-1 text-sm text-white no-underline bg-blue-600 rounded-lg"},"View Order")))},h=document.querySelector(".total-cart-data"),E=JSON.parse(h.textContent||"{}");ReactDOM.createRoot(document.querySelector("#root-step-indicator")).render((0,t.createElement)((({data:r})=>{const{fetchCart:o,addToCart:n,remFromCart:c,totalQuantity:s,totalPrice:i,totalSalePrice:l,isLoading:u,error:d}=v((t=>({fetchCart:t.fetchCart,addToCart:t.addToCart,remFromCart:t.remFromCart,totalQuantity:t.totalQuantity,totalPrice:t.totalPrice,totalSalePrice:t.totalSalePrice,error:t.error,isLoading:t.isLoading}))),[m,p]=(0,e.useState)(0),[f,g]=(0,e.useState)(""),[h,E]=(0,e.useState)(0),[b,w]=(0,e.useState)(r.percs),S=(i-l).toFixed(2),x=function(t){const e=t[t.length-1]+t[0];return[0,...t,e]}(r.steps),C=r.steps,N=r.percs,P=x[x.length-1],T=s/P*100;(0,e.useEffect)((()=>{O()}),[s]),(0,e.useEffect)((()=>{(()=>{if(m<C.length){const t=C[m];E(t-s)}else E(0)})()}),[s]);const O=()=>{let t=0;for(let e of x){if(!(s>=e))break;t=e}const e=0!==t?x.indexOf(t):0;if(0===e&&f)return console.log(`Removing coupon, as moving to step 0 from step: ${m}`),$(f),void p(0);const r=e?`coupon-step-${e}`:0;e!==m&&(p(e),console.log(`Current step: ${e} for total items: ${s}`),r&&f!==r)&&(f?$(f).then((()=>F(r))):F(r)).then((()=>{console.log("Coupon operation completed."),o()})).catch((t=>{console.error("Coupon operation failed:",t)}))},F=async t=>{console.log(`Applying coupon: ${t}`);try{const e=await a()({path:"/wc/store/v1/cart/apply-coupon",method:"POST",data:{code:t}});return console.log(`Coupon ${t} applied.`),g(t),setError(""),e}catch(e){throw console.error(`Error applying coupon ${t}:`,e),setError(`Failed to apply coupon ${t}.`),e}},$=async t=>{console.log(`Removing coupon: ${t}`);try{const e=await a()({path:"/wc/store/v1/cart/remove-coupon",method:"POST",data:{code:t}});return console.log(`Coupon ${t} removed.`),g(""),setError(""),e}catch(e){throw console.error(`Error removing coupon ${t}:`,e),setError(`Failed to remove coupon ${t}.`),e}};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"px-3 pt-1 pb-2 bg-blue-500 rounded-lg"},(0,t.createElement)("div",{className:"mb-3 text-xs font-semibold tracking-wide text-center text-white"},"Items selected: ",s),(0,t.createElement)("div",{className:"numbers-container"},x.filter(((t,e)=>0!==e&&e!==x.length-1)).map(((e,r)=>{const o=e/P*100;return(0,t.createElement)("div",{key:r,className:"step-number",style:{width:"20px",textAlign:"center",marginLeft:"-4px",left:o-2+"%"}},e)}))),(0,t.createElement)("div",{className:"progress-container"},(0,t.createElement)("div",{className:"progress-bar",style:{width:`${T}%`}}),x.filter(((t,e)=>0!==e&&e!==x.length-1)).map((e=>{const r=e/P*100;return(0,t.createElement)("div",{key:e,className:"step-marker",style:{left:`${r}%`}})}))),(0,t.createElement)("div",{className:"mt-2.5 numbers-container"},x.filter(((t,e)=>0!==e&&e!==x.length-1)).map(((e,r)=>{const o=e/P*100;return(0,t.createElement)("div",{key:r,className:"step-number",style:{width:"36px",textAlign:"center",marginLeft:"-4px",left:o-4+"%"}},N[r])}))),(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"flex items-center w-full pt-2 font-medium text-white bg-blue-500 rounded-lg justify-evenly"},(0,t.createElement)("div",null,(0,t.createElement)("span",{className:"text-sm font-light text-gray-100"},"Total: "),(0,t.createElement)("span",{className:"strikethrough-diagonal font-light text-sm text-gray-100 "},i,"€"),(0,t.createElement)("span",{className:"ml-2"},l,"€")),(0,t.createElement)("div",null,(0,t.createElement)("span",{className:"text-sm font-light text-gray-100"},"You save: "),(0,t.createElement)("span",{className:""},S,"€"))))),(0,t.createElement)(y,{beforeNextStep:h,percanteges:b,currentStep:m}))}),{data:E}))})()})();