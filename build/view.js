(()=>{"use strict";var e={63:(e,t,r)=>{var o=r(609),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useState,c=o.useEffect,l=o.useLayoutEffect,s=o.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var i="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),o=a({inst:{value:r,getSnapshot:t}}),n=o[0].inst,i=o[1];return l((function(){n.value=r,n.getSnapshot=t,u(n)&&i({inst:n})}),[e,r,t]),c((function(){return u(n)&&i({inst:n}),e((function(){u(n)&&i({inst:n})}))}),[e]),s(r),r};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:i},940:(e,t,r)=>{var o=r(609),n=r(888),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},c=n.useSyncExternalStore,l=o.useRef,s=o.useEffect,u=o.useMemo,i=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,o,n){var d=l(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;d=u((function(){function e(e){if(!s){if(s=!0,c=e,e=o(e),void 0!==n&&m.hasValue){var t=m.value;if(n(t,e))return l=t}return l=e}if(t=l,a(c,e))return t;var r=o(e);return void 0!==n&&n(t,r)?t:(c=e,l=r)}var c,l,s=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,r,o,n]);var p=c(e,d[0],d[1]);return s((function(){m.hasValue=!0,m.value=p}),[p]),i(p),p}},888:(e,t,r)=>{e.exports=r(63)},242:(e,t,r)=>{e.exports=r(940)},609:e=>{e.exports=window.React}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(609);const t=window.wp.element,o=window.wp.apiFetch;var n=r.n(o);const a=e=>{let t;const r=new Set,o=(e,o)=>{const n="function"==typeof e?e(t):e;if(!Object.is(n,t)){const e=t;t=(null!=o?o:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach((r=>r(t,e)))}},n=()=>t,a={setState:o,getState:n,getInitialState:()=>c,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=t=e(o,n,a);return a};var c=r(242);const{useDebugValue:l}=e,{useSyncExternalStoreWithSelector:s}=c;let u=!1;const i=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?a(e):a)(e):e,r=(e,r)=>function(e,t=i,r){r&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);const o=s(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return l(o),o}(t,e,r);return Object.assign(r,t),r};console.log("view.js");const m=(p=e=>({totalCartUpdate:0,triggerTotalCartUpdate:()=>e((e=>({totalCartUpdate:e.totalCartUpdate+1})))}))?d(p):d;var p;function f(e){const r=m((e=>e.triggerTotalCartUpdate)),[o,a]=(0,t.useState)(!1),[c,l]=(0,t.useState)(null),[s,u]=(0,t.useState)([]),[i,d]=(0,t.useState)(0),[p,f]=(0,t.useState)(0),[g,E]=(0,t.useState)(0),[v,h]=(0,t.useState)(0),[y,S]=(0,t.useState)("");(0,t.useEffect)((()=>{b()}),[]);const b=()=>{n()({path:"/wc/store/cart"}).then((e=>{const t=e.items;u(t);const r=e.items.reduce(((e,t)=>e+t.quantity),0);d(r);const o=parseFloat(e.totals.total_items)/100;f(o);const n=parseFloat(e.totals.total_price)/100;E(n),a(!1)})).catch((e=>{console.error("Error fetching cart:",e),l("Failed to fetch cart."),a(!1)}))};return{fetchCart:b,addToCart:e=>{a(!0);const t={id:e,quantity:1};n()({path:"/wc/store/cart/add-item",method:"POST",data:t}).then((()=>{console.log(`Add to cart: ${e}`)})).catch((e=>{console.error("Error incrementing item:",e),l("Failed to increment item."),a(!1)})).finally((()=>{b(),r()}))},remFromCart:e=>{a(!0);const t=s.find((t=>t.id===e));if(t)if(1===t.quantity){const o={key:t.key};n()({path:"/wc/store/cart/remove-item",method:"POST",data:o}).then((()=>{console.log(`Remove from cart: ${e}`),b(),r()})).catch((e=>{console.error("Error removing item:",e),l("Failed to remove item."),a(!1)}))}else{const o={key:t.key,quantity:t.quantity-1};n()({path:"/wc/store/cart/update-item",method:"POST",data:o}).then((()=>{console.log(`Decrease cart quantity: ${e}`),b(),r()})).catch((e=>{console.error("Error decrementing item:",e),l("Failed to decrement item."),a(!1)}))}else console.error("Item not found in cart:",e)},applyCoupon:e=>(console.log(`Applying coupon: ${e}`),n()({path:"/wc/store/v1/cart/apply-coupon",method:"POST",data:{code:e}}).then((t=>(console.log(`Coupon ${e} applied.`),S(e),t))).catch((t=>{throw console.error(`Error applying coupon ${e}:`,t),t}))),removeCoupon:e=>(console.log(`Removing coupon: ${e}`),n()({path:"/wc/store/v1/cart/remove-coupon",method:"POST",data:{code:e}}).then((t=>(console.log(`Coupon ${e} removed.`),S(""),t))).catch((t=>{throw console.error(`Error removing coupon ${e}:`,t),t}))),appliedCoupon:y,totalPrice:p,totalSalePrice:g,salePercentage:v,totalQuantity:i,isLoading:o,error:c}}ReactDOM.createRoot(document.querySelector("#root-progress-bar")).render((0,e.createElement)((()=>(0,e.createElement)("div",{className:"bg-blue-500 rounded-lg text-white px-1 py-8 flex justify-center"},"progress bar")),null));const g=({beforeNextStep:t,stepsPercanteges:r,currentStep:o})=>{const n=r[o];return(0,e.createElement)("div",{className:"text-sm flex border-2 border-blue-500 rounded-lg bg-white mb-1 px-3 py-2 items-center font-medium justify-center"},"Add ",(0,e.createElement)("span",{className:"mx-1"},t)," more for extra ",(0,e.createElement)("span",{className:"mx-1 bg-red-500 text-white px-2 py-1 rounded-lg"},"-",n,"% OFF"))},E=document.querySelector("#root-total-cart");function v({selectedProductId:r,productsData:o}){const n=o.find((e=>e.id===r)),[a,c]=(0,t.useState)(n?.imageUrls[0]||"");return(0,t.useEffect)((()=>{c(n?.imageUrls[0]||"")}),[r,n]),n?(0,e.createElement)("div",{className:"image-viewer-wrapper"},(0,e.createElement)("div",{className:"full-size-wrapper"},(0,e.createElement)("img",{src:a,alt:"Selected"}))):(0,e.createElement)("div",null,"No product selected")}function h({selectedProductId:t}){return(0,e.createElement)("div",null,"Selected Product ID: ",t)}function y({products:t,onProductSelect:r,selectedProductId:o}){return(0,e.createElement)("div",null,t.map((t=>(0,e.createElement)("button",{key:t.id,onClick:()=>r(t.id),style:{padding:"0.5em 1em",margin:"1em 0",fontWeight:t.id===o?"bold":"normal"}},t.counterValue))))}function S({productId:r,initialValue:o,togglerValueChange:n}){m((e=>e.triggerTotalCartUpdate));const[a,c]=(0,t.useState)(o),{fetchCart:l,addToCart:s,remFromCart:u,isLoading:i,error:d}=f();return(0,t.useEffect)((()=>{c(o)}),[o]),(0,t.useEffect)((()=>{}),[]),(0,e.createElement)("div",null,(0,e.createElement)("button",{style:{padding:"0.5em 1em"},onClick:()=>{if(a>0){const e=a-1;c(e),n(e),u(r)}},disabled:i},"-"),(0,e.createElement)("span",null," ",a," "),(0,e.createElement)("button",{style:{padding:"0.5em 1em"},onClick:()=>{const e=a+1;c(e),n(e),s(r)},disabled:i},"+"))}function b({data:r}){const[o,n]=(0,t.useState)([]),[a,c]=(0,t.useState)(null),[l,s]=(0,t.useState)(0);return(0,t.useEffect)((()=>{const e=o.find((e=>e.id===a));s(e?e.counterValue:0)}),[o,a]),(0,t.useEffect)((()=>{n(r),r.length>0&&c(r[0].id)}),[r]),(0,e.createElement)("div",{className:"product-wrapper",style:{display:"flex",flexDirection:"column",alignItems:"center"}},(0,e.createElement)(v,{selectedProductId:a,productsData:o}),(0,e.createElement)(h,{selectedProductId:a}),(0,e.createElement)(y,{products:o,onProductSelect:e=>{c(e)},selectedProductId:a}),(0,e.createElement)(S,{productId:a,initialValue:l,togglerValueChange:e=>{const t=o.map((t=>t.id===a?{...t,counterValue:e}:t));n(t)}}))}ReactDOM.createRoot(E).render((0,e.createElement)((function(){const r=m((e=>e.totalCartUpdate)),{fetchCart:o,applyCoupon:n,removeCoupon:a,appliedCoupon:c,totalQuantity:l,totalPrice:s,totalSalePrice:u,salePercentage:i,isLoading:d,error:p}=f(),[E,v]=(0,t.useState)([2,6,8,11]),[h,y]=(0,t.useState)(0),S=["5","10","15","20"],[b,w]=(0,t.useState)(0);(0,t.useEffect)((()=>{(()=>{if(h<E.length){const e=E[h];w(e-l)}else w(0)})()}),[h,l,E]),(0,t.useEffect)((()=>{o(),x()}),[l]),(0,t.useEffect)((()=>{o()}),[r]);const x=()=>{let e=0;for(let t of E){if(!(l>=t))break;e=t}const t=0!==e?E.indexOf(e)+1:0;if(0===t&&c)return console.log(`Removing coupon, as moving to step 0 from step: ${h}`),a(c),y(0),void o();const r=t?`coupon-step-${t}`:0;t!==h&&(y(t),console.log(`Current step: ${t} for total items: ${l}`),r&&c!==r)&&(c?a(c).then((()=>n(r))):n(r)).then((()=>{console.log("Coupon operation completed."),o()})).catch((e=>{console.error("Coupon operation failed:",e)}))};return d?(0,e.createElement)("div",null,"Loading cart items..."):p?(0,e.createElement)("div",null,"Error: ",p):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(g,{beforeNextStep:b,stepsPercanteges:S,currentStep:h}),(0,e.createElement)("div",{className:"bg-blue-500 rounded-lg w-full flex px-3 py-4 text-white font-medium justify-around"},(0,e.createElement)("div",null,(0,e.createElement)("span",{className:"mr-1"},u,"€"),(0,e.createElement)("span",{className:"strikethrough-diagonal font-light text-sm text-gray-100 "+(0!=h?"opacity-100":"opacity-0")},s,"€")),(0,e.createElement)("div",{className:"bg-white text-gray-700 rounded-lg px-2 "+(0!=h?"opacity-100":"opacity-0")},"-",S[h-1],"% OFF"),(0,e.createElement)("div",{className:"flex gap-x-2 items-center"},(0,e.createElement)("div",{className:"bg-white text-gray-700 rounded-lg px-1.5 text-sm"},l),(0,e.createElement)("a",{href:"/?page_id=9",className:"no-underline text-white text-sm"},"View Order"))))}),null)),document.querySelectorAll(".react-container").forEach((t=>{const r=t.querySelector(".product-data");if(r){const o=JSON.parse(r.textContent||"[]");ReactDOM.createRoot(t).render((0,e.createElement)(b,{data:o}))}}))})()})();