(()=>{"use strict";var e={63:(e,t,o)=>{var n=o(609),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,c=n.useEffect,l=n.useLayoutEffect,u=n.useDebugValue;function i(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!r(e,o)}catch(e){return!0}}var s="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),n=a({inst:{value:o,getSnapshot:t}}),r=n[0].inst,s=n[1];return l((function(){r.value=o,r.getSnapshot=t,i(r)&&s({inst:r})}),[e,o,t]),c((function(){return i(r)&&s({inst:r}),e((function(){i(r)&&s({inst:r})}))}),[e]),u(o),o};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:s},940:(e,t,o)=>{var n=o(609),r=o(888),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},c=r.useSyncExternalStore,l=n.useRef,u=n.useEffect,i=n.useMemo,s=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,o,n,r){var d=l(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=i((function(){function e(e){if(!u){if(u=!0,c=e,e=n(e),void 0!==r&&p.hasValue){var t=p.value;if(r(t,e))return l=t}return l=e}if(t=l,a(c,e))return t;var o=n(e);return void 0!==r&&r(t,o)?t:(c=e,l=o)}var c,l,u=!1,i=void 0===o?null:o;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]}),[t,o,n,r]);var m=c(e,d[0],d[1]);return u((function(){p.hasValue=!0,p.value=m}),[m]),s(m),m}},888:(e,t,o)=>{e.exports=o(63)},242:(e,t,o)=>{e.exports=o(940)},609:e=>{e.exports=window.React}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=o(609);const t=window.wp.element,n=window.wp.apiFetch;var r=o.n(n);const a=e=>{let t;const o=new Set,n=(e,n)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=n?n:"object"!=typeof r||null===r)?r:Object.assign({},t,r),o.forEach((o=>o(t,e)))}},r=()=>t,a={setState:n,getState:r,getInitialState:()=>c,subscribe:e=>(o.add(e),()=>o.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},c=t=e(n,r,a);return a};var c=o(242);const{useDebugValue:l}=e,{useSyncExternalStoreWithSelector:u}=c;let i=!1;const s=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?a(e):a)(e):e,o=(e,o)=>function(e,t=s,o){o&&!i&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),i=!0);const n=u(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,o);return l(n),n}(t,e,o);return Object.assign(o,t),o};console.log("view.js");const p=(m=e=>({totalCartUpdate:0,triggerTotalCartUpdate:()=>e((e=>({totalCartUpdate:e.totalCartUpdate+1})))}))?d(m):d;var m;function f(e){const o=p((e=>e.triggerTotalCartUpdate)),[n,a]=(0,t.useState)(!1),[c,l]=(0,t.useState)(null),[u,i]=(0,t.useState)([]),[s,d]=(0,t.useState)(0),[m,f]=(0,t.useState)(0),[g,v]=(0,t.useState)(0),[E,h]=(0,t.useState)(0),[y,S]=(0,t.useState)("");(0,t.useEffect)((()=>{b()}),[]);const b=()=>{r()({path:"/wc/store/cart"}).then((e=>{const t=e.items;i(t);const o=e.items.reduce(((e,t)=>e+t.quantity),0);d(o);const n=parseFloat(e.totals.total_items)/100;f(n);const r=parseFloat(e.totals.total_price)/100;v(r),a(!1)})).catch((e=>{console.error("Error fetching cart:",e),l("Failed to fetch cart."),a(!1)}))};return{fetchCart:b,addToCart:e=>{a(!0);const t={id:e,quantity:1};r()({path:"/wc/store/cart/add-item",method:"POST",data:t}).then((()=>{console.log(`Add to cart: ${e}`)})).catch((e=>{console.error("Error incrementing item:",e),l("Failed to increment item."),a(!1)})).finally((()=>{b(),o()}))},remFromCart:e=>{a(!0);const t=u.find((t=>t.id===e));if(t)if(1===t.quantity){const n={key:t.key};r()({path:"/wc/store/cart/remove-item",method:"POST",data:n}).then((()=>{console.log(`Remove from cart: ${e}`),b(),o()})).catch((e=>{console.error("Error removing item:",e),l("Failed to remove item."),a(!1)}))}else{const n={key:t.key,quantity:t.quantity-1};r()({path:"/wc/store/cart/update-item",method:"POST",data:n}).then((()=>{console.log(`Decrease cart quantity: ${e}`),b(),o()})).catch((e=>{console.error("Error decrementing item:",e),l("Failed to decrement item."),a(!1)}))}else console.error("Item not found in cart:",e)},applyCoupon:e=>(console.log(`Applying coupon: ${e}`),r()({path:"/wc/store/v1/cart/apply-coupon",method:"POST",data:{code:e}}).then((t=>(console.log(`Coupon ${e} applied.`),S(e),t))).catch((t=>{throw console.error(`Error applying coupon ${e}:`,t),t}))),removeCoupon:e=>(console.log(`Removing coupon: ${e}`),r()({path:"/wc/store/v1/cart/remove-coupon",method:"POST",data:{code:e}}).then((t=>(console.log(`Coupon ${e} removed.`),S(""),t))).catch((t=>{throw console.error(`Error removing coupon ${e}:`,t),t}))),appliedCoupon:y,totalPrice:m,totalSalePrice:g,salePercentage:E,totalQuantity:s,isLoading:n,error:c}}const g=document.querySelector("#root-temp");function v({selectedProductId:o,productsData:n}){const r=n.find((e=>e.id===o)),[a,c]=(0,t.useState)(r?.imageUrls[0]||"");return(0,t.useEffect)((()=>{c(r?.imageUrls[0]||"")}),[o,r]),r?(0,e.createElement)("div",{className:"image-viewer-wrapper"},(0,e.createElement)("div",{className:"full-size-wrapper"},(0,e.createElement)("img",{src:a,alt:"Selected"}))):(0,e.createElement)("div",null,"No product selected")}function E({selectedProductId:t}){return(0,e.createElement)("div",null,"Selected Product ID: ",t)}function h({products:t,onProductSelect:o,selectedProductId:n}){return(0,e.createElement)("div",null,t.map((t=>(0,e.createElement)("button",{key:t.id,onClick:()=>o(t.id),style:{padding:"0.5em 1em",margin:"1em 0",fontWeight:t.id===n?"bold":"normal"}},t.counterValue))))}function y({productId:o,initialValue:n,togglerValueChange:r}){p((e=>e.triggerTotalCartUpdate));const[a,c]=(0,t.useState)(n),{fetchCart:l,addToCart:u,remFromCart:i,isLoading:s,error:d}=f();return(0,t.useEffect)((()=>{c(n)}),[n]),(0,t.useEffect)((()=>{}),[]),(0,e.createElement)("div",null,(0,e.createElement)("button",{style:{padding:"0.5em 1em"},onClick:()=>{if(a>0){const e=a-1;c(e),r(e),i(o)}},disabled:s},"-"),(0,e.createElement)("span",null," ",a," "),(0,e.createElement)("button",{style:{padding:"0.5em 1em"},onClick:()=>{const e=a+1;c(e),r(e),u(o)},disabled:s},"+"))}function S({data:o}){const[n,r]=(0,t.useState)([]),[a,c]=(0,t.useState)(null),[l,u]=(0,t.useState)(0);return(0,t.useEffect)((()=>{const e=n.find((e=>e.id===a));u(e?e.counterValue:0)}),[n,a]),(0,t.useEffect)((()=>{r(o),o.length>0&&c(o[0].id)}),[o]),(0,e.createElement)("div",{className:"product-wrapper",style:{display:"flex",flexDirection:"column",alignItems:"center"}},(0,e.createElement)(v,{selectedProductId:a,productsData:n}),(0,e.createElement)(E,{selectedProductId:a}),(0,e.createElement)(h,{products:n,onProductSelect:e=>{c(e)},selectedProductId:a}),(0,e.createElement)(y,{productId:a,initialValue:l,togglerValueChange:e=>{const t=n.map((t=>t.id===a?{...t,counterValue:e}:t));r(t)}}))}ReactDOM.createRoot(g).render((0,e.createElement)((function(){const o=p((e=>e.totalCartUpdate)),{fetchCart:n,applyCoupon:r,removeCoupon:a,appliedCoupon:c,totalQuantity:l,totalPrice:u,totalSalePrice:i,salePercentage:s,isLoading:d,error:m}=f(),[g,v]=(0,t.useState)([3,5,7,9]),[E,h]=(0,t.useState)(null);(0,t.useEffect)((()=>{n(),y()}),[l]),(0,t.useEffect)((()=>{n()}),[o]);const y=()=>{let e=null;for(let t of g){if(!(l>=t))break;e=t}const t=null!==e?g.indexOf(e)+1:null;if(null===t&&c)return console.log(`Removing coupon, as moving to step 0 from step: ${E}`),a(c),h(null),void n();const o=t?`coupon-step-${t}`:null;t!==E&&(h(t),console.log(`Current step: ${t} for total items: ${l}`),o&&c!==o)&&(c?a(c).then((()=>r(o))):r(o)).then((()=>{console.log("Coupon operation completed."),n()})).catch((e=>{console.error("Coupon operation failed:",e)}))};return d?(0,e.createElement)("div",null,"Loading cart items..."):m?(0,e.createElement)("div",null,"Error: ",m):(0,e.createElement)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},(0,e.createElement)("div",null,"Total items: ",l),(0,e.createElement)("div",null,(0,e.createElement)("span",{style:{padding:"0.25em",borderStyle:"solid",borderColor:null!==E?"fuchsia":"grey",width:"70px",textAlign:"center",display:"inline-block"}}," ",i," €")," ",null!==E&&(0,e.createElement)("span",{style:{backgroundColor:"grey",padding:"0.5em",color:"white"}},u," €")," "),(0,e.createElement)("div",null,"Discount step: ",E),console.log("return",l))}),null)),document.querySelectorAll(".react-container").forEach((t=>{const o=t.querySelector(".product-data");if(o){const n=JSON.parse(o.textContent||"[]");ReactDOM.createRoot(t).render((0,e.createElement)(S,{data:n}))}}))})()})();