(()=>{"use strict";var e={63:(e,t,o)=>{var r=o(609),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,c=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function i(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!n(e,o)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),r=a({inst:{value:o,getSnapshot:t}}),n=r[0].inst,u=r[1];return s((function(){n.value=o,n.getSnapshot=t,i(n)&&u({inst:n})}),[e,o,t]),c((function(){return i(n)&&u({inst:n}),e((function(){i(n)&&u({inst:n})}))}),[e]),l(o),o};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},940:(e,t,o)=>{var r=o(609),n=o(888),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},c=n.useSyncExternalStore,s=r.useRef,l=r.useEffect,i=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,o,r,n){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=i((function(){function e(e){if(!l){if(l=!0,c=e,e=r(e),void 0!==n&&p.hasValue){var t=p.value;if(n(t,e))return s=t}return s=e}if(t=s,a(c,e))return t;var o=r(e);return void 0!==n&&n(t,o)?t:(c=e,s=o)}var c,s,l=!1,i=void 0===o?null:o;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]}),[t,o,r,n]);var m=c(e,d[0],d[1]);return l((function(){p.hasValue=!0,p.value=m}),[m]),u(m),m}},888:(e,t,o)=>{e.exports=o(63)},242:(e,t,o)=>{e.exports=o(940)},609:e=>{e.exports=window.React}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=o(609);const t=window.wp.element,r=window.wp.apiFetch;var n=o.n(r);const a=e=>{let t;const o=new Set,r=(e,r)=>{const n="function"==typeof e?e(t):e;if(!Object.is(n,t)){const e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),o.forEach((o=>o(t,e)))}},n=()=>t,a={setState:r,getState:n,getInitialState:()=>c,subscribe:e=>(o.add(e),()=>o.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},c=t=e(r,n,a);return a};var c=o(242);const{useDebugValue:s}=e,{useSyncExternalStoreWithSelector:l}=c;let i=!1;const u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?a(e):a)(e):e,o=(e,o)=>function(e,t=u,o){o&&!i&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),i=!0);const r=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,o);return s(r),r}(t,e,o);return Object.assign(o,t),o},p=(m=e=>({totalCartUpdate:0,triggerTotalCartUpdate:()=>e((e=>(console.log(`Updating totalCartUpdate from ${e.totalCartUpdate} to ${e.totalCartUpdate+1}`),{totalCartUpdate:e.totalCartUpdate+1})))}))?d(m):d;var m;console.log("view.js");const f=({beforeNextStep:t,stepsPercanteges:o,currentStep:r})=>{const n=o[r];return(0,e.createElement)("div",{className:"flex items-center justify-center px-3 py-2 mb-1 text-sm font-medium bg-white border-2 border-blue-500 rounded-lg"},"Add ",(0,e.createElement)("span",{className:"mx-1"},t)," more for extra"," ",(0,e.createElement)("span",{className:"px-2 py-1 mx-1 text-white bg-red-500 rounded-lg"},"-",n,"% OFF"))},g=document.querySelector("#root-total-cart"),v=document.querySelector(".discount-steps-data"),h=JSON.parse(v.textContent||"[]");ReactDOM.createRoot(g).render((0,e.createElement)((({data:o})=>{const r=p((e=>e.triggerTotalCartUpdate)),a=p((e=>(console.log("Reading totalCartUpdate",e.totalCartUpdate),e.totalCartUpdate))),{fetchCart:c,applyCoupon:s,removeCoupon:l,appliedCoupon:i,totalQuantity:u,totalPrice:d,totalSalePrice:m,salePercentage:g,isLoading:v,error:h}=function(e){const o=p((e=>e.triggerTotalCartUpdate)),[r,a]=(0,t.useState)(!1),[c,s]=(0,t.useState)(null),[l,i]=(0,t.useState)([]),[u,d]=(0,t.useState)(0),[m,f]=(0,t.useState)(0),[g,v]=(0,t.useState)(0),[h,y]=(0,t.useState)(0),[S,E]=(0,t.useState)("");(0,t.useEffect)((()=>{b()}),[]);const b=()=>{n()({path:"/wc/store/cart"}).then((e=>{const t=e.items;i(t);const o=e.items.reduce(((e,t)=>e+t.quantity),0);d(o);const r=parseFloat(e.totals.total_items)/100;f(r);const n=parseFloat(e.totals.total_price)/100;v(n),a(!1)})).catch((e=>{console.error("Error fetching cart:",e),s("Failed to fetch cart."),a(!1)}))};return{fetchCart:b,addToCart:e=>{a(!0);const t={id:e,quantity:1};n()({path:"/wc/store/cart/add-item",method:"POST",data:t}).then((()=>{console.log(`Add to cart: ${e}`)})).catch((e=>{console.error("Error incrementing item:",e),s("Failed to increment item."),a(!1)})).finally((()=>{b(),o()}))},remFromCart:e=>{a(!0);const t=l.find((t=>t.id===e));if(t)if(1===t.quantity){const r={key:t.key};n()({path:"/wc/store/cart/remove-item",method:"POST",data:r}).then((()=>{console.log(`Remove from cart: ${e}`),b(),o()})).catch((e=>{console.error("Error removing item:",e),s("Failed to remove item."),a(!1)}))}else{const r={key:t.key,quantity:t.quantity-1};n()({path:"/wc/store/cart/update-item",method:"POST",data:r}).then((()=>{console.log(`Decrease cart quantity: ${e}`),b(),o()})).catch((e=>{console.error("Error decrementing item:",e),s("Failed to decrement item."),a(!1)}))}else console.error("Item not found in cart:",e)},applyCoupon:e=>(console.log(`Applying coupon: ${e}`),n()({path:"/wc/store/v1/cart/apply-coupon",method:"POST",data:{code:e}}).then((t=>(console.log(`Coupon ${e} applied.`),E(e),t))).catch((t=>{throw console.error(`Error applying coupon ${e}:`,t),t}))),removeCoupon:e=>(console.log(`Removing coupon: ${e}`),n()({path:"/wc/store/v1/cart/remove-coupon",method:"POST",data:{code:e}}).then((t=>(console.log(`Coupon ${e} removed.`),E(""),t))).catch((t=>{throw console.error(`Error removing coupon ${e}:`,t),t}))),appliedCoupon:S,totalPrice:m,totalSalePrice:g,salePercentage:h,totalQuantity:u,isLoading:r,error:c}}(),[y,S]=(0,t.useState)(o),[E,b]=(0,t.useState)(0),w=["5","10","15","20"],[x,C]=(0,t.useState)(0);(0,t.useEffect)((()=>{}),[]),(0,t.useEffect)((()=>{(()=>{if(E<y.length){const e=y[E];C(e-u)}else C(0)})()}),[E,u,y]),(0,t.useEffect)((()=>{c(),O()}),[u]),(0,t.useEffect)((()=>{c()}),[a]);const O=()=>{let e=0;for(let t of y){if(!(u>=t))break;e=t}const t=0!==e?y.indexOf(e)+1:0;if(0===t&&i)return console.log(`Removing coupon, as moving to step 0 from step: ${E}`),l(i),b(0),void c();const o=t?`coupon-step-${t}`:0;t!==E&&(b(t),console.log(`Current step: ${t} for total items: ${u}`),o&&i!==o)&&(i?l(i).then((()=>s(o))):s(o)).then((()=>{console.log("Coupon operation completed."),c()})).catch((e=>{console.error("Coupon operation failed:",e)}))};return v?(0,e.createElement)("div",null,"Loading cart items..."):h?(0,e.createElement)("div",null,"Error: ",h):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",null,a),(0,e.createElement)("button",{onClick:r},"button"),(0,e.createElement)(f,{beforeNextStep:x,stepsPercanteges:w,currentStep:E}),(0,e.createElement)("div",{className:"flex justify-around w-full px-3 py-4 font-medium text-white bg-blue-500 rounded-lg"},(0,e.createElement)("div",null,(0,e.createElement)("span",{className:"mr-1"},m,"€"),(0,e.createElement)("span",{className:"strikethrough-diagonal font-light text-sm text-gray-100 "+(0!=E?"opacity-100":"opacity-0")},d,"€")),(0,e.createElement)("div",{className:"bg-white text-gray-700 rounded-lg px-2 "+(0!=E?"opacity-100":"opacity-0")},"-",w[E-1],"% OFF"),(0,e.createElement)("div",{className:"flex items-center gap-x-2"},(0,e.createElement)("div",{className:"bg-white text-gray-700 rounded-lg px-1.5 text-sm"},u),(0,e.createElement)("a",{href:"/?page_id=9",className:"text-sm text-white no-underline"},"View Order"))))}),{data:h}))})()})();