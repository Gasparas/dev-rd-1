(()=>{"use strict";var t={63:(t,e,r)=>{var o=r(609),a="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},c=o.useState,n=o.useEffect,s=o.useLayoutEffect,i=o.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!a(t,r)}catch(t){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),o=c({inst:{value:r,getSnapshot:e}}),a=o[0].inst,d=o[1];return s((function(){a.value=r,a.getSnapshot=e,u(a)&&d({inst:a})}),[t,r,e]),n((function(){return u(a)&&d({inst:a}),t((function(){u(a)&&d({inst:a})}))}),[t]),i(r),r};e.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:d},940:(t,e,r)=>{var o=r(609),a=r(888),c="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},n=a.useSyncExternalStore,s=o.useRef,i=o.useEffect,u=o.useMemo,d=o.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,r,o,a){var l=s(null);if(null===l.current){var p={hasValue:!1,value:null};l.current=p}else p=l.current;l=u((function(){function t(t){if(!i){if(i=!0,n=t,t=o(t),void 0!==a&&p.hasValue){var e=p.value;if(a(e,t))return s=e}return s=t}if(e=s,c(n,t))return e;var r=o(t);return void 0!==a&&a(e,r)?e:(n=t,s=r)}var n,s,i=!1,u=void 0===r?null:r;return[function(){return t(e())},null===u?void 0:function(){return t(u())}]}),[e,r,o,a]);var f=n(t,l[0],l[1]);return i((function(){p.hasValue=!0,p.value=f}),[f]),d(f),f}},888:(t,e,r)=>{t.exports=r(63)},242:(t,e,r)=>{t.exports=r(940)},609:t=>{t.exports=window.React}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var c=e[o]={exports:{}};return t[o](c,c.exports,r),c.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const o=window.wp.apiFetch;var a=r.n(o);const c=window.wp.element,n=t=>{let e;const r=new Set,o=(t,o)=>{const a="function"==typeof t?t(e):t;if(!Object.is(a,e)){const t=e;e=(null!=o?o:"object"!=typeof a||null===a)?a:Object.assign({},e,a),r.forEach((r=>r(e,t)))}},a=()=>e,c={setState:o,getState:a,getInitialState:()=>n,subscribe:t=>(r.add(t),()=>r.delete(t)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},n=e=t(o,a,c);return c};var s=r(609),i=r(242);const{useDebugValue:u}=s,{useSyncExternalStoreWithSelector:d}=i;let l=!1;const p=t=>t,f=t=>{"function"!=typeof t&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e="function"==typeof t?(t=>t?n(t):n)(t):t,r=(t,r)=>function(t,e=p,r){r&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);const o=d(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return u(o),o}(e,t,r);return Object.assign(r,e),r},y=window.lodash;function m(t,e){let r;return function(...o){clearTimeout(r),r=setTimeout((()=>{clearTimeout(r),t(...o)}),e)}}void 0===window.throttle&&(window.throttle=y.throttle),void 0===window.debounce&&(window.debounce=m);const h={},g={};var w;window.myGlobalStore=window.myGlobalStore||((w=(t,e)=>({totalCartUpdate:0,cartProducts:[],totalQuantity:0,totalPrice:0,totalSalePrice:0,totalDiscountPrice:0,currencyData:{currency_code:"EUR",currency_decimal_separator:".",currency_minor_unit:2,currency_prefix:"",currency_suffix:"€",currency_symbol:"€",currency_thousand_separator:""},isLoading:!1,error:"",isAddingToCart:!1,cartAdditions:{},cartRemovals:{},cartCoupons:[],triggerUpdateProductDisplayPrices:!1,fetchCart:async()=>{try{const e=await a()({path:"/wc/store/cart"});t({cartProducts:e.items,totalQuantity:e.items.reduce(((t,e)=>t+e.quantity),0),totalPrice:parseFloat(e.totals.total_items)/100,totalSalePrice:parseFloat(e.totals.total_price)/100,totalDiscountPrice:parseFloat(e.totals.total_discount)/100,currencyData:{currency_code:e.totals.currency_code,currency_decimal_separator:e.totals.currency_decimal_separator,currency_minor_unit:e.totals.currency_minor_unit,currency_prefix:e.totals.currency_prefix,currency_suffix:e.totals.currency_suffix,currency_symbol:e.totals.currency_symbol,currency_thousand_separator:e.totals.currency_thousand_separator},cartCoupons:e.coupons,error:""})}catch(e){console.error("Error fetching cart:",e),t({error:"Failed to fetch cart."})}},wc_price:(t,r=!0)=>{const{currency_code:o,currency_decimal_separator:a,currency_minor_unit:c,currency_prefix:n,currency_suffix:s,currency_symbol:i,currency_thousand_separator:u}=e().currencyData,d=t.toFixed(c),[l,p]=d.split(".");let f=n+l.replace(/\B(?=(\d{3})+(?!\d))/g,u);return p&&(f+=a+p),f+=s,r?`<span class="woocommerce-Price-amount amount"><bdi>${f}</bdi></span>`:f},addToCart:r=>{const o=e().cartAdditions[r]||0;t((t=>({cartAdditions:{...t.cartAdditions,[r]:o+1}}))),h[r]||(h[r]=m((async()=>{t({isLoading:!0});try{const o=e().cartAdditions[r];console.log(`Adding ${o} of product ${r} to cart.`),await a()({path:"/wc/store/cart/add-item",method:"POST",data:{id:r,quantity:o}}),t((t=>({cartAdditions:{...t.cartAdditions,[r]:0}}))),e().fetchCart()}catch(e){console.error("Error adding item to cart:",e),t({error:"Failed to add item to cart."})}finally{t({isLoading:!1})}}),300)),h[r]()},remFromCart:r=>{const o=e().cartRemovals[r]||0;t((t=>({cartRemovals:{...t.cartRemovals,[r]:o+1}}))),g[r]||(g[r]=m((async()=>{t({isLoading:!0});const o=e().cartProducts.find((t=>t.id===r));if(!o)return console.error("Item not found in cart:",r),void t({isLoading:!1});try{const c={key:o.key,quantity:o.quantity-e().cartRemovals[r]};t((t=>({cartRemovals:{...t.cartRemovals,[r]:0}}))),await a()({path:c.quantity>0?"/wc/store/cart/update-item":"/wc/store/cart/remove-item",method:"POST",data:c}),console.log(`Updated cart for product ${r}.`),e().fetchCart()}catch(e){console.error("Error updating cart:",e),t({error:"Failed to update cart."})}finally{t({isLoading:!1}),e().triggerTotalCartUpdate()}}),300)),g[r]()},applyCoupon:async e=>{console.log(`Applying coupon: ${e}`);try{const r=await a()({path:"/wc/store/v1/cart/apply-coupon",method:"POST",data:{code:e}});return console.log(`Coupon ${e} applied.`),t({triggerUpdateProductDisplayPrices:!0}),setTimeout((()=>{t({triggerUpdateProductDisplayPrices:!1})}),200),t({totalPrice:parseFloat(r.totals.total_items)/100,totalSalePrice:parseFloat(r.totals.total_price)/100,totalDiscountPrice:parseFloat(r.totals.total_discount)/100,currencyData:{currency_code:r.totals.currency_code,currency_decimal_separator:r.totals.currency_decimal_separator,currency_minor_unit:r.totals.currency_minor_unit,currency_prefix:r.totals.currency_prefix,currency_suffix:r.totals.currency_suffix,currency_symbol:r.totals.currency_symbol,currency_thousand_separator:r.totals.currency_thousand_separator},cartCoupons:r.coupons}),r}catch(t){throw console.error(`Error applying coupon ${e}:`,t),t}},triggerTotalCartUpdate:()=>{t((t=>({totalCartUpdate:t.totalCartUpdate+1})))}}))?f(w):f);const _=window.myGlobalStore,v=(...t)=>t.filter(((t,e,r)=>Boolean(t)&&r.indexOf(t)===e)).join(" ");var b={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x=(0,s.forwardRef)((({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:c,iconNode:n,...i},u)=>(0,s.createElement)("svg",{ref:u,...b,width:e,height:e,stroke:t,strokeWidth:o?24*Number(r)/Number(e):r,className:v("lucide",a),...i},[...n.map((([t,e])=>(0,s.createElement)(t,e))),...Array.isArray(c)?c:[c]]))),S=(t,e)=>{const r=(0,s.forwardRef)((({className:r,...o},a)=>{return(0,s.createElement)(x,{ref:a,iconNode:e,className:v(`lucide-${c=t,c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...o});var c}));return r.displayName=`${t}`,r},P=S("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),E=S("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),j=window.ReactJSXRuntime;function C({selectedProductId:t,productsData:e}){const r=e.find((e=>e.id===t)),[o,a]=(0,c.useState)(r?.imageUrls[0]||"");return(0,c.useEffect)((()=>{a(r?.imageUrls[0]||"")}),[t,r]),r?(0,j.jsx)("div",{className:"image-viewer-wrapper",children:(0,j.jsx)("div",{className:"full-size-wrapper",children:(0,j.jsx)("img",{src:o,alt:"Selected"})})}):(0,j.jsx)("div",{children:"No product selected"})}function D({selectedProductTitle:t,selectedProductPrice:e}){const r=({html:t})=>(0,j.jsx)("span",{dangerouslySetInnerHTML:{__html:t}});return(0,j.jsxs)("div",{className:"flex items-center w-full mt-2 gap-x-4 h-14",children:[(0,j.jsx)("div",{className:"text-xl basis-1/5",children:(0,j.jsx)(r,{html:e})}),(0,j.jsx)("div",{className:"leading-snug basis-4/5",children:t})]})}function k({products:t,onProductSelect:e,selectedProductId:r}){return(0,j.jsx)("div",{className:"flex gap-x-3",children:t.map((t=>(0,j.jsx)("button",{className:"w-11 h-11",onClick:()=>e(t.id),style:{background:t.color,borderRadius:"50%",color:"white",margin:"1em 0",fontWeight:"bold",outline:t.id===r?"2px solid #3c82f6":"none",outlineOffset:"3px"},children:0===t.counterValue?" ":t.counterValue},t.id)))})}function T({product:t,isDisabled:e,onQuantityUpdate:r}){const{isLoading:o,fetchCart:a,addToCart:n,remFromCart:s}=_((t=>({isLoading:t.isLoading,fetchCart:t.fetchCart,addToCart:t.addToCart,remFromCart:t.remFromCart}))),[i,u]=(0,c.useState)(t.counterValue);return(0,c.useEffect)((()=>{i!=t.counterValue&&u(t.counterValue)}),[t.counterValue]),(0,c.useEffect)((()=>{o||i==t.counterValue||r(i)}),[o]),(0,j.jsxs)("div",{className:"py-3 shadow-md rounded-md flex items-center justify-around w-44 font-bold bg-gray-300 [&>button]:bg-white [&>button]:rounded-full [&>button>svg]:m-auto [&>button]:h-8 [&>button]:w-8",children:[(0,j.jsx)("button",{onClick:()=>{i>0&&(u(i-1),s(t.id))},disabled:e,children:(0,j.jsx)(P,{size:20,strokeWidth:3})}),(0,j.jsx)("span",{children:i}),(0,j.jsx)("button",{onClick:()=>{u(i+1),n(t.id)},disabled:e,children:(0,j.jsx)(E,{size:20,strokeWidth:3})})]})}function N({productsSkus:t}){const[e,r]=(0,c.useState)([]),[o,n]=(0,c.useState)(null),[s,i]=(0,c.useState)(!1),{isLoading:u,fetchCart:d,triggerUpdateProductDisplayPrices:l}=_((t=>({isLoading:t.isLoading,fetchCart:t.fetchCart,triggerUpdateProductDisplayPrices:t.triggerUpdateProductDisplayPrices}))),p=()=>{i(!0),a()({path:"/rd-shop-product/v1/block-product-display-data",data:{skus:t},method:"POST"}).then((t=>{t?.data&&(r(t.data),t.data.length>0&&!o&&n(t.data[0].id)),i(!1)}))};(0,c.useEffect)((()=>{d(),p()}),[t]),(0,c.useEffect)((()=>{l&&p()}),[l]),(0,c.useEffect)((()=>{e.find((t=>t.id===o))}),[e,o]);const f=e.find((t=>t.id===o)),y=f?f.title:"",m=f?f.price:"";return o?(0,j.jsxs)("div",{className:"mb-14 product-wrapper",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,j.jsx)(C,{selectedProductId:o,productsData:e}),(0,j.jsx)(D,{selectedProductId:o,selectedProductTitle:y,selectedProductPrice:m}),(0,j.jsx)(k,{products:e,onProductSelect:t=>{n(t)},selectedProductId:o}),(0,j.jsx)(T,{product:f,isDisabled:u||s,onQuantityUpdate:p})]}):(0,j.jsx)("div",{})}document.querySelectorAll(".react-container").forEach((t=>{const e=JSON.parse(t.dataset?.products_skus||"[]");ReactDOM.createRoot(t).render((0,j.jsx)(N,{productsSkus:e}))}))})();