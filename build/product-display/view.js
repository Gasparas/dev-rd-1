(()=>{"use strict";var t={63:(t,e,r)=>{var a=r(609),o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},n=a.useState,c=a.useEffect,i=a.useLayoutEffect,s=a.useDebugValue;function l(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!o(t,r)}catch(t){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),a=n({inst:{value:r,getSnapshot:e}}),o=a[0].inst,u=a[1];return i((function(){o.value=r,o.getSnapshot=e,l(o)&&u({inst:o})}),[t,r,e]),c((function(){return l(o)&&u({inst:o}),t((function(){l(o)&&u({inst:o})}))}),[t]),s(r),r};e.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:u},940:(t,e,r)=>{var a=r(609),o=r(888),n="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},c=o.useSyncExternalStore,i=a.useRef,s=a.useEffect,l=a.useMemo,u=a.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,r,a,o){var d=i(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=l((function(){function t(t){if(!s){if(s=!0,c=t,t=a(t),void 0!==o&&f.hasValue){var e=f.value;if(o(e,t))return i=e}return i=t}if(e=i,n(c,t))return e;var r=a(t);return void 0!==o&&o(e,r)?e:(c=t,i=r)}var c,i,s=!1,l=void 0===r?null:r;return[function(){return t(e())},null===l?void 0:function(){return t(l())}]}),[e,r,a,o]);var m=c(t,d[0],d[1]);return s((function(){f.hasValue=!0,f.value=m}),[m]),u(m),m}},888:(t,e,r)=>{t.exports=r(63)},242:(t,e,r)=>{t.exports=r(940)},609:t=>{t.exports=window.React}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,r),n.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=r(609);const e=window.wp.element,a=window.wp.apiFetch;var o=r.n(a);const n=t=>{let e;const r=new Set,a=(t,a)=>{const o="function"==typeof t?t(e):t;if(!Object.is(o,e)){const t=e;e=(null!=a?a:"object"!=typeof o||null===o)?o:Object.assign({},e,o),r.forEach((r=>r(e,t)))}},o=()=>e,n={setState:a,getState:o,getInitialState:()=>c,subscribe:t=>(r.add(t),()=>r.delete(t)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=e=t(a,o,n);return n};var c=r(242);const{useDebugValue:i}=t,{useSyncExternalStoreWithSelector:s}=c;let l=!1;const u=t=>t,d=t=>{"function"!=typeof t&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e="function"==typeof t?(t=>t?n(t):n)(t):t,r=(t,r)=>function(t,e=u,r){r&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);const a=s(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return i(a),a}(e,t,r);return Object.assign(r,e),r};function f(t,e){let r;return function(...a){clearTimeout(r),r=setTimeout((()=>{clearTimeout(r),t(...a)}),e)}}const m={},p={};var g;window.myGlobalStore=window.myGlobalStore||((g=(t,e)=>({totalCartUpdate:0,cartProducts:[],totalQuantity:0,totalPrice:0,totalSalePrice:0,isLoading:!1,error:"",isAddingToCart:!1,cartAdditions:{},cartRemovals:{},fetchCart:async()=>{try{const e=await o()({path:"/wc/store/cart"});t({cartProducts:e.items,totalQuantity:e.items.reduce(((t,e)=>t+e.quantity),0),totalPrice:parseFloat(e.totals.total_items)/100,totalSalePrice:parseFloat(e.totals.total_price)/100,error:""})}catch(e){console.error("Error fetching cart:",e),t({error:"Failed to fetch cart."})}},addToCart:r=>{const a=e().cartAdditions[r]||0;t((t=>({cartAdditions:{...t.cartAdditions,[r]:a+1}}))),m[r]||(m[r]=f((async()=>{t({isLoading:!0});try{const a=e().cartAdditions[r];console.log(`Adding ${a} of product ${r} to cart.`),await o()({path:"/wc/store/cart/add-item",method:"POST",data:{id:r,quantity:a}}),t((t=>({cartAdditions:{...t.cartAdditions,[r]:0}}))),e().fetchCart()}catch(e){console.error("Error adding item to cart:",e),t({error:"Failed to add item to cart."})}finally{t({isLoading:!1})}}),300)),m[r]()},remFromCart:r=>{const a=e().cartRemovals[r]||0;t((t=>({cartRemovals:{...t.cartRemovals,[r]:a+1}}))),p[r]||(p[r]=f((async()=>{t({isLoading:!0});const a=e().cartProducts.find((t=>t.id===r));if(!a)return console.error("Item not found in cart:",r),void t({isLoading:!1});try{const n={key:a.key,quantity:a.quantity-e().cartRemovals[r]};t((t=>({cartRemovals:{...t.cartRemovals,[r]:0}}))),await o()({path:n.quantity>0?"/wc/store/cart/update-item":"/wc/store/cart/remove-item",method:"POST",data:n}),console.log(`Updated cart for product ${r}.`),e().fetchCart()}catch(e){console.error("Error updating cart:",e),t({error:"Failed to update cart."})}finally{t({isLoading:!1}),e().triggerTotalCartUpdate()}}),300)),p[r]()},triggerTotalCartUpdate:()=>{t((t=>({totalCartUpdate:t.totalCartUpdate+1})))}}))?d(g):d);const h=window.myGlobalStore,y=window.lodash;var v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const w=(e,r)=>{const a=(0,t.forwardRef)((({color:a="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:i="",children:s,...l},u)=>{return(0,t.createElement)("svg",{ref:u,...v,width:o,height:o,stroke:a,strokeWidth:c?24*Number(n)/Number(o):n,className:["lucide",`lucide-${d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i].join(" "),...l},[...r.map((([e,r])=>(0,t.createElement)(e,r))),...Array.isArray(s)?s:[s]]);var d}));return a.displayName=`${e}`,a},E=w("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),b=w("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function S({selectedProductId:r,productsData:a}){const o=a.find((t=>t.id===r)),[n,c]=(0,e.useState)(o?.imageUrls[0]||"");return(0,e.useEffect)((()=>{c(o?.imageUrls[0]||"")}),[r,o]),o?(0,t.createElement)("div",{className:"image-viewer-wrapper"},(0,t.createElement)("div",{className:"full-size-wrapper"},(0,t.createElement)("img",{src:n,alt:"Selected"}))):(0,t.createElement)("div",null,"No product selected")}function C({selectedProductTitle:e,selectedProductPrice:r}){return(0,t.createElement)("div",{className:"flex items-center w-full mt-2 gap-x-4 h-14"},(0,t.createElement)("div",{className:"text-xl basis-1/5"},(0,t.createElement)((({html:e})=>(0,t.createElement)("span",{dangerouslySetInnerHTML:{__html:e}})),{html:r})),(0,t.createElement)("div",{className:"leading-snug basis-4/5"},e))}function P({products:e,onProductSelect:r,selectedProductId:a}){return(0,t.createElement)("div",{className:"flex gap-x-3"},e.map((e=>(0,t.createElement)("button",{className:"w-11 h-11",key:e.id,onClick:()=>r(e.id),style:{background:e.color,borderRadius:"50%",color:"white",margin:"1em 0",fontWeight:"bold",outline:e.id===a?"2px solid #3c82f6":"none",outlineOffset:"3px"}},0===e.counterValue?" ":e.counterValue))))}function x({productId:r,initialValue:a,togglerValueChange:o}){const{fetchCart:n,addToCart:c,remFromCart:i,totalQuantity:s,totalPrice:l,isLoading:u,error:d}=h((t=>({fetchCart:t.fetchCart,addToCart:t.addToCart,remFromCart:t.remFromCart,totalQuantity:t.totalQuantity,totalPrice:t.totalPrice,error:t.error,isLoading:t.isLoading}))),[f,m]=(0,e.useState)(a);return(0,e.useEffect)((()=>{m(a)}),[a]),(0,e.useEffect)((()=>{n()}),[f]),(0,y.throttle)((t=>{window.myGlobalStore.getState().addToCart(t),console.log("t")}),1e4),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"py-3 shadow-md rounded-md flex items-center justify-around w-44 font-bold bg-gray-300 [&>button]:bg-white [&>button]:rounded-full [&>button>svg]:m-auto [&>button]:h-8 [&>button]:w-8"},(0,t.createElement)("button",{onClick:()=>{if(f>0){const t=f-1;m(t),o(t),i(r),n()}},disabled:u},(0,t.createElement)(E,{size:20,strokeWidth:3})),(0,t.createElement)("span",null,f),(0,t.createElement)("button",{onClick:()=>{const t=f+1;m(t),o(t),c(r),n()},disabled:u},(0,t.createElement)(b,{size:20,strokeWidth:3}))))}function T({data:r}){const[a,o]=(0,e.useState)([]),[n,c]=(0,e.useState)(null),[i,s]=(0,e.useState)(0);(0,e.useEffect)((()=>{const t=a.find((t=>t.id===n));s(t?t.counterValue:0)}),[a,n]),(0,e.useEffect)((()=>{o(r),r.length>0&&c(r[0].id)}),[r]);const l=a.find((t=>t.id===n)),u=l?l.title:"",d=l?l.price:"";return(0,t.createElement)("div",{className:"mb-14 product-wrapper",style:{display:"flex",flexDirection:"column",alignItems:"center"}},(0,t.createElement)(S,{selectedProductId:n,productsData:a}),(0,t.createElement)(C,{selectedProductId:n,selectedProductTitle:u,selectedProductPrice:d}),(0,t.createElement)(P,{products:a,onProductSelect:t=>{c(t)},selectedProductId:n}),(0,t.createElement)(x,{productId:n,initialValue:i,togglerValueChange:t=>{const e=a.map((e=>e.id===n?{...e,counterValue:t}:e));o(e)}}))}document.querySelectorAll(".react-container").forEach((e=>{const r=e.querySelector(".product-data");if(r){const a=JSON.parse(r.textContent||"[]");ReactDOM.createRoot(e).render((0,t.createElement)(T,{data:a}))}}))})()})();