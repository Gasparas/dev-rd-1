(()=>{"use strict";var e={63:(e,t,r)=>{var o=r(609),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=o.useState,c=o.useEffect,s=o.useLayoutEffect,i=o.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),o=n({inst:{value:r,getSnapshot:t}}),a=o[0].inst,u=o[1];return s((function(){a.value=r,a.getSnapshot=t,l(a)&&u({inst:a})}),[e,r,t]),c((function(){return l(a)&&u({inst:a}),e((function(){l(a)&&u({inst:a})}))}),[e]),i(r),r};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},940:(e,t,r)=>{var o=r(609),a=r(888),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},c=a.useSyncExternalStore,s=o.useRef,i=o.useEffect,l=o.useMemo,u=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,o,a){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=l((function(){function e(e){if(!i){if(i=!0,c=e,e=o(e),void 0!==a&&p.hasValue){var t=p.value;if(a(t,e))return s=t}return s=e}if(t=s,n(c,e))return t;var r=o(e);return void 0!==a&&a(t,r)?t:(c=e,s=r)}var c,s,i=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,r,o,a]);var m=c(e,d[0],d[1]);return i((function(){p.hasValue=!0,p.value=m}),[m]),u(m),m}},888:(e,t,r)=>{e.exports=r(63)},242:(e,t,r)=>{e.exports=r(940)},609:e=>{e.exports=window.React}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(609);const t=window.wp.element,o=window.wp.apiFetch;var a=r.n(o);const n=e=>{let t;const r=new Set,o=(e,o)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=o?o:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach((r=>r(t,e)))}},a=()=>t,n={setState:o,getState:a,getInitialState:()=>c,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=t=e(o,a,n);return n};var c=r(242);const{useDebugValue:s}=e,{useSyncExternalStoreWithSelector:i}=c;let l=!1;const u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?n(e):n)(e):e,r=(e,r)=>function(e,t=u,r){r&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);const o=i(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return s(o),o}(t,e,r);return Object.assign(r,t),r},p=window.lodash;function m(e,t){let r;return function(...o){clearTimeout(r),r=setTimeout((()=>{clearTimeout(r),e(...o)}),t)}}void 0===window.throttle&&(window.throttle=p.throttle),void 0===window.debounce&&(window.debounce=m);const f={},y={};var g;window.myGlobalStore=window.myGlobalStore||((g=(e,t)=>({totalCartUpdate:0,cartProducts:[],totalQuantity:0,totalPrice:0,totalSalePrice:0,totalDiscountPrice:0,currencyData:{currency_code:"EUR",currency_decimal_separator:".",currency_minor_unit:2,currency_prefix:"",currency_suffix:"€",currency_symbol:"€",currency_thousand_separator:""},isLoading:!1,error:"",isAddingToCart:!1,cartAdditions:{},cartRemovals:{},triggerUpdateProductDisplayPrices:!1,fetchCart:async()=>{try{const t=await a()({path:"/wc/store/cart"});e({cartProducts:t.items,totalQuantity:t.items.reduce(((e,t)=>e+t.quantity),0),totalPrice:parseFloat(t.totals.total_items)/100,totalSalePrice:parseFloat(t.totals.total_price)/100,totalDiscountPrice:parseFloat(t.totals.total_discount)/100,currencyData:{currency_code:t.totals.currency_code,currency_decimal_separator:t.totals.currency_decimal_separator,currency_minor_unit:t.totals.currency_minor_unit,currency_prefix:t.totals.currency_prefix,currency_suffix:t.totals.currency_suffix,currency_symbol:t.totals.currency_symbol,currency_thousand_separator:t.totals.currency_thousand_separator},error:""})}catch(t){console.error("Error fetching cart:",t),e({error:"Failed to fetch cart."})}},wc_price:(e,r=!0)=>{const{currency_code:o,currency_decimal_separator:a,currency_minor_unit:n,currency_prefix:c,currency_suffix:s,currency_symbol:i,currency_thousand_separator:l}=t().currencyData,u=e.toFixed(n),[d,p]=u.split(".");let m=c+d.replace(/\B(?=(\d{3})+(?!\d))/g,l);return p&&(m+=a+p),m+=s,r?`<span class="woocommerce-Price-amount amount"><bdi>${m}</bdi></span>`:m},addToCart:r=>{const o=t().cartAdditions[r]||0;e((e=>({cartAdditions:{...e.cartAdditions,[r]:o+1}}))),f[r]||(f[r]=m((async()=>{e({isLoading:!0});try{const o=t().cartAdditions[r];console.log(`Adding ${o} of product ${r} to cart.`),await a()({path:"/wc/store/cart/add-item",method:"POST",data:{id:r,quantity:o}}),e((e=>({cartAdditions:{...e.cartAdditions,[r]:0}}))),t().fetchCart()}catch(t){console.error("Error adding item to cart:",t),e({error:"Failed to add item to cart."})}finally{e({isLoading:!1})}}),300)),f[r]()},remFromCart:r=>{const o=t().cartRemovals[r]||0;e((e=>({cartRemovals:{...e.cartRemovals,[r]:o+1}}))),y[r]||(y[r]=m((async()=>{e({isLoading:!0});const o=t().cartProducts.find((e=>e.id===r));if(!o)return console.error("Item not found in cart:",r),void e({isLoading:!1});try{const n={key:o.key,quantity:o.quantity-t().cartRemovals[r]};e((e=>({cartRemovals:{...e.cartRemovals,[r]:0}}))),await a()({path:n.quantity>0?"/wc/store/cart/update-item":"/wc/store/cart/remove-item",method:"POST",data:n}),console.log(`Updated cart for product ${r}.`),t().fetchCart()}catch(t){console.error("Error updating cart:",t),e({error:"Failed to update cart."})}finally{e({isLoading:!1}),t().triggerTotalCartUpdate()}}),300)),y[r]()},applyCoupon:async t=>{console.log(`Applying coupon: ${t}`);try{const r=await a()({path:"/wc/store/v1/cart/apply-coupon",method:"POST",data:{code:t}});return console.log(`Coupon ${t} applied.`),e({triggerUpdateProductDisplayPrices:!0}),setTimeout((()=>{e({triggerUpdateProductDisplayPrices:!1})}),200),r}catch(e){throw console.error(`Error applying coupon ${t}:`,e),e}},triggerTotalCartUpdate:()=>{e((e=>({totalCartUpdate:e.totalCartUpdate+1})))}}))?d(g):d);const v=window.myGlobalStore;console.log("view.js");const h=({beforeNextStep:t,percanteges:r,currentStep:o})=>{const a=r[o];return(0,e.createElement)("div",{className:"lg:w-[400px] w-[330px]",style:{position:"fixed",bottom:"5px",left:"50%",translate:"-50%"}},(0,e.createElement)("div",{className:"flex  justify-around items-center px-3 py-2 mb-1 text-sm font-medium text-white bg-blue-500 rounded-lg [&>span]:text-xs"},(0,e.createElement)("div",null,"Add ",(0,e.createElement)("span",{className:"mr-1"},t),"more to get"," ",(0,e.createElement)("span",{className:"mx-1"},a," OFF")),(0,e.createElement)("a",{href:"/?page_id=9",className:"px-2 py-1 text-sm text-white no-underline bg-blue-600 rounded-lg"},"View Order")))},w=document.querySelector(".total-cart-data"),E=JSON.parse(w?.textContent||"{}"),b=document.querySelector("#root-step-indicator");b&&ReactDOM.createRoot(b).render((0,e.createElement)((({data:r})=>{const{fetchCart:o,addToCart:n,remFromCart:c,totalQuantity:s,totalPrice:i,totalSalePrice:l,isLoading:u,error:d}=v((e=>({fetchCart:e.fetchCart,addToCart:e.addToCart,remFromCart:e.remFromCart,totalQuantity:e.totalQuantity,totalPrice:e.totalPrice,totalSalePrice:e.totalSalePrice,error:e.error,isLoading:e.isLoading}))),[p,m]=(0,t.useState)(0),[f,y]=(0,t.useState)(""),[g,w]=(0,t.useState)(0),[E,b]=(0,t.useState)(r.percs),x=(i-l).toFixed(2),S=function(e){const t=e[e.length-1]+e[0];return[0,...e,t]}(r.steps),_=r.steps,P=r.percs,C=S[S.length-1],N=s/C*100;(0,t.useEffect)((()=>{T()}),[s]),(0,t.useEffect)((()=>{(()=>{if(p<_.length){const e=_[p];w(e-s)}else w(0)})()}),[s]);const T=()=>{let e=0;for(let t of S){if(!(s>=t))break;e=t}const t=0!==e?S.indexOf(e):0;if(0===t&&f)return console.log(`Removing coupon, as moving to step 0 from step: ${p}`),F(f),void m(0);const r=t?`coupon-step-${t}`:0;t!==p&&(m(t),console.log(`Current step: ${t} for total items: ${s}`),r&&f!==r)&&(f?F(f).then((()=>$(r))):$(r)).then((()=>{console.log("Coupon operation completed."),o()})).catch((e=>{console.error("Coupon operation failed:",e)}))},$=async e=>{console.log(`Applying coupon: ${e}`);try{const t=await a()({path:"/wc/store/v1/cart/apply-coupon",method:"POST",data:{code:e}});return console.log(`Coupon ${e} applied.`),y(e),setError(""),t}catch(t){throw console.error(`Error applying coupon ${e}:`,t),setError(`Failed to apply coupon ${e}.`),t}},F=async e=>{console.log(`Removing coupon: ${e}`);try{const t=await a()({path:"/wc/store/v1/cart/remove-coupon",method:"POST",data:{code:e}});return console.log(`Coupon ${e} removed.`),y(""),setError(""),t}catch(t){throw console.error(`Error removing coupon ${e}:`,t),setError(`Failed to remove coupon ${e}.`),t}};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"px-3 pt-1 pb-2 bg-blue-500 rounded-lg"},(0,e.createElement)("div",{className:"mb-3 text-xs font-semibold tracking-wide text-center text-white"},"Items selected: ",s),(0,e.createElement)("div",{className:"numbers-container"},S.filter(((e,t)=>0!==t&&t!==S.length-1)).map(((t,r)=>{const o=t/C*100;return(0,e.createElement)("div",{key:r,className:"step-number",style:{width:"20px",textAlign:"center",marginLeft:"-4px",left:o-2+"%"}},t)}))),(0,e.createElement)("div",{className:"progress-container"},(0,e.createElement)("div",{className:"progress-bar",style:{width:`${N}%`}}),S.filter(((e,t)=>0!==t&&t!==S.length-1)).map((t=>{const r=t/C*100;return(0,e.createElement)("div",{key:t,className:"step-marker",style:{left:`${r}%`}})}))),(0,e.createElement)("div",{className:"mt-2.5 numbers-container"},S.filter(((e,t)=>0!==t&&t!==S.length-1)).map(((t,r)=>{const o=t/C*100;return(0,e.createElement)("div",{key:r,className:"step-number",style:{width:"36px",textAlign:"center",marginLeft:"-4px",left:o-4+"%"}},P[r])}))),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex items-center w-full pt-2 font-medium text-white bg-blue-500 rounded-lg justify-evenly"},(0,e.createElement)("div",null,(0,e.createElement)("span",{className:"text-sm font-light text-gray-100"},"Total: "),(0,e.createElement)("span",{className:"strikethrough-diagonal font-light text-sm text-gray-100 "},i,"€"),(0,e.createElement)("span",{className:"ml-2"},l,"€")),(0,e.createElement)("div",null,(0,e.createElement)("span",{className:"text-sm font-light text-gray-100"},"You save: "),(0,e.createElement)("span",{className:""},x,"€"))))),(0,e.createElement)(h,{beforeNextStep:g,percanteges:E,currentStep:p}))}),{data:E}))})()})();